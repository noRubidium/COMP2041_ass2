<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>{0}</title>
	<meta charset="utf-8" />
	<link href="css/bootstrap.min.css" rel="stylesheet" />
	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Tangerine">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
	<script src="js/jquery-2.1.4.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react-dom.js"></script>
	<script type="text/babel">
	var mountNode = document.getElementById('test')
var UserGist = React.createClass({
  getInitialState: function() {
    return {
      username: '',
      lastGistUrl: ''
    };
  },

  componentDidMount: function() {
    $.get(this.props.source, function(result) {
    	console.log(result);
      var lastGist = result;
	console.log(lastGist);
      if (this.isMounted()) {
        this.setState({
          username: lastGist.username,
          lastGistUrl: lastGist.listens
        });
      }
    }.bind(this));
  },
  componentDidUpdate: function() {
    $.get(this.props.source, function(result) {
      console.log(result);
      var lastGist = result;
  console.log(lastGist);
      if (this.isMounted()) {
        this.setState({
          username: lastGist.username,
          lastGistUrl: lastGist.listens
        });
      }
    }.bind(this));
  },
  render: function() {
    return (
      <div>
        {this.state.username}'s last gist is
        <a >{this.state.lastGistUrl} here</a>.
      </div>
    );
  }
});

ReactDOM.render(
  <UserGist source="http://cgi.cse.unsw.edu.au/~z5041652/ass2/json_response.cgi?username=Mark" />,
  mountNode
);
</script>
</head>
<body>
<div id="test"></div>
</body>
</html>